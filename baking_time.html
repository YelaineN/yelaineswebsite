<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zoey's Sweet Bake-Off!</title>
  <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Mystery+Quest&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Bellota:wght@400;700&display=swap" rel="stylesheet">

  


  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      cursor: url('https://cur.cursors-4u.net/symbols/sym-6/sym599.cur'), auto !important;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: url('images/orange.png') no-repeat center center fixed;
      background-size: cover;
      position: relative;
      overflow: hidden;
    }

    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.4) 1px, transparent 1px) 0 0,
                  radial-gradient(circle, rgba(255, 255, 255, 0.4) 1px, transparent 1px) 50px 50px;
      background-size: 100px 100px;
      z-index: 0;
      pointer-events: none;
    }

    
    #gradient-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(255, 237, 164, 0.13), rgba(255, 255, 255, 0.286));
      pointer-events: none;
      z-index: 1;
    }

    h1 {
  font-family: 'Mystery Quest', sans-serif;
  color: rgb(244, 111, 140);
text-shadow: -1px -1px 1px  rgb(250, 183, 198), 1px 1px 1px rgb(149, 36, 60);
  position: absolute;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 60px;
  font-weight: bold;
  pointer-events: none;
  user-select: none;
  text-align: center;
  padding: 10px;
  border-radius: 10px;
  z-index: 100;
}

#game-container {
      width: 1000px;
      height: 750px;
      background-image: url('images/baking-bg.jpg');
      background-size: cover;
      background-position: center;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      border-radius: 20px;
      z-index: 2;
      overflow: hidden;
      border: 7px solid rgba(240, 184, 55, 0.86);
      box-shadow: 0 10px 10px rgba(121, 58, 12, 0.473);
    }

      

    #border-image {
      position: absolute;
      width: 1000px;
      height: 750px;
      z-index: 3;
      pointer-events: none;
      box-shadow: 0 0 15px rgba(204, 121, 13, 0.5), 0 0 25px rgba(117, 51, 4, 0.4);
      border-radius: 20px;
    }

    #mini-me {
      position: absolute;
      top:35%;
      right: 4%;
      height: 200px;
      width: 300px;
      height: auto;
      z-index: 6;
      user-select: none;
      animation: wobble 1s ease-in-out infinite;
    }

    @keyframes wobble {
  0%, 100% {
    transform: rotate(0);
  }
  50% {
    transform: rotate(2deg);
  }
}

#mini-me_shadow {
      position: absolute;
      bottom:-2%;
      right:7%;
      transform: translate(-50%, -50%);
      height: 100px;
      width: 200px;
      height: auto;
      z-index: 1000;
      user-select: none;
    }

    #text-holder {
      position: absolute;
      top:50%;
      left: 50%;
      transform: translate(-50%, -50%);
      height: 1000px;
      width: 1000px;
      height: auto;
      z-index: 5;
      user-select: none;
    }

    #game-description {
  font-family: 'Gamja Flower', sans-serif;
  font-size: 24px;
  color: #dd5880d2;
  position: absolute;
  top: 35%;
  left: 50%;
  text-align: center;
  transform: translateX(-50%);
  padding: 10px;
  margin-top: 0;
  z-index: 10;
}


#player-name-section {
      position: absolute;
      top: 59%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: none;
      padding: 15px 20px;
      border-radius: 40px;
      z-index: 11;
      background-image: url('images/polkadot.png');
      border: 2px solid #8ac15f;
      
      font-family: 'Gamja Flower', sans-serif;
      text-align: center;
    }
    #player-name-section label {
      font-size: 20px;
      color: #e85877;
      background: red;
    }
    #player-name {
      padding: 8px;
      margin: 10px 0;
      border: 2px solid #8ac15f;
      border-radius: 20px;
      font-size: 18px;
      width: 200px;
      text-align: center;
    }
    #player-name-section button {
      background-color: rgb(244, 111, 140);
      box-shadow: -1px -1px 1px  rgb(250, 183, 198), 1px 1px 1px rgb(149, 36, 60);
      color: rgb(255, 239, 239);
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 18px;
    }
    #player-name-section button:hover {
  transform: scale(1.05);
  filter: drop-shadow(0 0 10px rgb(255, 255, 255));
    }

  .name-explain {
  font-family: 'Bellota', sans-serif;
  font-size: 18px;
  font-weight: bold;
  color: #66a9b0;
  position: absolute;
  top: 103%;
  left: 50%;
  text-align: center;
  transform: translateX(-50%);
  padding: 10px;
  margin-top: 0;
  z-index: 10;
  white-space: nowrap;
}

    #cover-image {
      position: absolute;
      width: 1000px;
      height: 750px;
      background-image: url('images/cover-baking.png');
      background-size: cover;
      background-position: center;
      z-index: 4;
      transition: opacity 0.5s ease-in-out;
    }

  

    canvas {
      width: 1000px;
      height: 750px;
      border-radius: 15px;
      position: relative;
      z-index: 2;
      display: none;
    }

    #timer {
      position: absolute;
      top: 7%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 300px;
      height: 25px;
      border: 2px solid white;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0.99), rgb(255, 172, 188));
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      z-index: 6;
    }

    #timer-fill {
      height: 100%;
      border-radius: 10px;
      background: repeating-linear-gradient(45deg, rgb(195, 233, 92), rgb(195, 233, 92) 10px, rgb(162, 217, 94) 10px, rgb(119, 168, 58) 20px);
    }

    #apple-store {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 28px;
      color: #fff;
      font-weight: bold;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 12px;
      border-radius: 10px;
      z-index: 4;
    }

    #music-button {
      position: absolute;
      bottom: 15px;
      right: 20px;
      width: 130px;
      height: 131px;
      padding: 0;
      background: transparent;
      border:none;
      background-color: transparent;
      cursor: pointer;
      z-index: 10;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      background-image: url('images/music-btn.png');
      background-size: cover;
      background-position: center;
      border-radius: 15px;
    }

    #music-button:hover {
      transform: scale(1.1);
      filter: drop-shadow(0 0 10px rgb(255, 255, 255));
    }

    #music-button:focus {
      outline: none;
    }

    #timer-image {
      position: absolute;
      top: 1.1%;
      left: 45%;
      transform: translateX(-50%);
      height: 630px;
      width: 750px;
      z-index: 5;
      border-radius: 15px;
      display: none;
    }

   
    #btn__back {
      position: absolute;
      top: -5%;
      left: 0%;
      width: 250px;
      height: 250px;
      border: none;
      padding: 0;
      background: transparent;
      background-color: transparent;
      cursor: pointer;
      z-index: 10;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      background-image: url('images/back-btn.png');
      background-size: cover;
      background-position: center;
      border-radius: 15px;
    }

    #btn__back:hover {
      transform: scale(1.1);
       filter: drop-shadow(0 0 10px rgb(255, 255, 255));
    }

    #btn__back:focus {
      outline: none;
    }

    



#instructions-container {
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 1000px;
  height: 750px;
  border-radius: 15px;
  position: relative;
  z-index: 2;
  display: block;
}

#key-buttons {
  position: absolute;
  top: 42%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 400px;
  width: 500px;
  height: auto;
  z-index: 6;
  user-select: none;
  filter: drop-shadow(0 0 10px rgb(255, 255, 255));
}

#instruction-text {
  font-family: 'Gamja Flower', sans-serif;
  font-size: 35px;
  font-weight: bold;
  color: #4a95b8;
  text-shadow: -1px -1px 1px  rgb(232, 249, 255), 1px 1px 1px rgb(31, 91, 124);
  position: absolute;
  top: 28%;
  left: 50%;
  text-align: center;
  transform: translateX(-50%);
  padding: 10px;
  margin-top: 0;
  z-index: 10;
  display: inline-block; 
  white-space: nowrap; 
  filter: drop-shadow(0 0 10px rgb(255, 255, 255));
}



    /* Go Button */
    #go-btn {
      position: absolute;
      bottom: 1%;
      left: 50%;
      transform: translateX(-50%); 
      width: 133px;
      height: 52px;
      border: none;
      padding: 0;
      background: transparent;
      background-color: transparent;
      cursor: pointer;
      z-index: 10;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      background-image: url('images/go-btn.png');
      background-size: cover;
      background-position: center;
      border-radius: 15px;
    }

    #go-btn:hover {
      transform: translateX(-50%) scale(1.1); /* Enlarges the button slightly on hover, without shifting */
      filter: drop-shadow(0 0 10px rgb(255, 255, 255));
    }

    #go-btn:focus {
      outline: none;
    }

    #leaderboard {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  background: #f8e661;
  border: 5px solid #f1c40f;
  border-radius: 20px;
  padding: 20px;
  z-index: 1000;
  text-align: center;
  font-family: 'Gamja Flower', sans-serif;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
  max-height: 400px;           /* ← total box max */
  overflow: hidden;           /* hide anything that overflows */
}


#leaderboard h2 {
  margin-bottom: 15px;
  font-size: 35px;
  color: transparent;
  background: linear-gradient(
    to right,
    rgb(246, 76, 113) 20%,
    #ff97a0 50%,
    rgb(246, 76, 113) 80%
  );
  background-size: 1000px 100%;
  background-clip: text;
  -webkit-background-clip: text;
  animation: shimmer 2s infinite linear;
}

@keyframes shimmer {
  0% {
    background-position: -500px 0;
  }
  100% {
    background-position: 500px 0;
  }
}


#score-list {
  list-style: none;
  padding: 0;
  color: rgb(221, 68, 101);
  max-height: 350px;          /* ← leave room for your title & padding */
  overflow-y: auto;           /* ← vertical scroll when needed */
  padding-right: 10px;        /* ← avoid scrollbar covering text */
  margin: 0;  
}

#score-list li {
  font-size: 24px;
  padding: 8px;
  border-bottom: 1px dashed #c49c08;
}



  </style>
</head>
<body>
  <button aria-label="Back" id="btn__back"></button>
  <div id="gradient-overlay"></div>
  <div id="game-container">
    <h1>Sweet Bake-Off!</h1>
    <img id="border-image" src="images/border-baking.png" alt="border" />
    <p id="game-description">
      Zoey must gather ingredients to secure her spot in the competition! The more she collects, the sweeter her chances of winning the <strong>GRAND PRIZE!</strong>
    </p>
    

      <!-- Player Name Input Section -->
      <div id="player-name-section">
        
        <input type="text" id="player-name" name="player-name" placeholder="Your Player Name">
        <button onclick="savePlayerName()">Submit</button>
        <p class="name-explain">This name will appear on the leaderboard.</p>
      </div>
    
    <img id="mini-me" src="images/mini-me_baking.png" alt="mini Me" />
    <img id="mini-me_shadow" src="images/mini-me_shadow.png" alt="mini me shadow" />
    <img id="text-holder" src="images/text-holder.png" alt="text-holder" />
    

    <div id="cover-image"></div>
    
    <img id="timer-image" src="images/timer-baking.png" alt="Timer" />
    <div id="timer" style="display: none;">
      <div id="timer-fill"></div>
    </div>


    <div id="instructions-container"> 
      <div id="instruction-text" style="display: none;">Press the left/right arrows to start!</div>
      <img id="key-buttons" src="images/key-baking.png" style="display: none;" alt="key-buttons" />
    </div>

    <div id="apple-store" style="display: none;">Apples: 0</div>
    <button id="music-button" style="display: none;">
      <i id="music-icon"></i>
    </button> 
    <canvas id="gameCanvas" style="display: none;"></canvas>
    <button id="go-btn"></button> 

    <div id="leaderboard" style="display: none;">
      <h2>Leaderboard</h2>
      <ul id="score-list">
        <!-- Scores will be dynamically inserted here -->
      </ul>
    </div>
    
    

  <script>






     // Store player's name
     let playerName = '';


function savePlayerName() {
  const input = document.getElementById('player-name');
  const nameExplain = document.querySelector('.name-explain');
  playerName = input.value.trim();
  
  if (playerName === '') {
    nameExplain.textContent = "You need to enter a player name first!";
    nameExplain.style.color = "red"; 
  } else {
    localStorage.setItem("playerName", playerName);
    nameExplain.textContent = "You succeeded!";
    nameExplain.style.color = "#66a9b0"; 
  }
}




    // Hover sound
    const hoverAudio = new Audio('audio/button-hover.mp3');
    hoverAudio.volume = 0.1;
  
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
      button.addEventListener('mouseover', () => {
        hoverAudio.currentTime = 0;
        hoverAudio.play();
      });
    });

    const pickupSound = new Audio('audio/baking-pickup.mp3');
  pickupSound.volume = 0.06;

  
    document.getElementById('btn__back').addEventListener('click', () => {
      const sound = new Audio('audio/sparkly_click.wav');
      sound.volume = 0.2;
      sound.play();
      sound.onended = () => {
        window.location.href = "secondpage.html";
      };
    });

    const music = new Audio('audio/baking-game.mp3');
music.loop = true;
music.volume = 0.1;

const yay = new Audio('audio/leaderboard.mp3');
  yay.loop = false;      // only play once
  yay.volume = 0.3;
  



    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 1000;
    canvas.height = 750;

    const player = {
      x: canvas.width / 2 - 100,
      y: canvas.height - 340,
      width: 200,
      height: 250,
      speed: 5,
      imageRight: new Image(),
      imageLeft: new Image(),
      currentImage: 'right'
    };

    player.imageRight.src = 'images/zoey-right.png';
    player.imageLeft.src = 'images/zoey-left.png';

    const keys = { left: false, right: false };
    let gameStarted = false;  
    let gameActive = false;   
    let timerInterval;        
    let applesCaught = 0;
    let timer = 0;
    let gameDuration = 30;    

    
document.getElementById('instruction-text').style.display = 'none';

    
    document.getElementById('go-btn').addEventListener('click', () => {
      


  if (playerName === '') {
    
    const nameExplain = document.querySelector('.name-explain');
    nameExplain.textContent = "You need to enter a player name first!";
    nameExplain.style.color = "red"; 
    return; 
  }

      document.querySelector('h1').style.display = 'none'; 


      canvas.style.display = 'block';
      document.getElementById('cover-image').style.display = 'none';
      document.getElementById('go-btn').style.display = 'none';
      document.getElementById('text-holder').style.display = 'none';
      document.getElementById('mini-me').style.display = 'none';
      document.getElementById('mini-me_shadow').style.display = 'none';
      document.getElementById('game-description').style.display = 'none';
      document.getElementById('player-name-section').style.display = 'none';
  
      
      document.getElementById('apple-store').textContent = `Ingredients: ${applesCaught}`;
      document.getElementById('timer').style.display = 'block';
      document.getElementById('timer-image').style.display = 'block';
      document.getElementById('apple-store').style.display = 'block';
      document.getElementById('music-button').style.display = 'block';
      document.getElementById('key-buttons').style.display = 'block';
      document.getElementById('instruction-text').style.display = 'block';

    draw();
  }); 


    
    document.addEventListener('keydown', (e) => {
      
      if (!gameStarted && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
        gameStarted = true;  
        gameActive = true;   
        applesCaught = 0;
        timer = 0;

       
    document.getElementById('instruction-text').style.display = 'none';

    document.getElementById('key-buttons').style.display = 'none';

       
        document.getElementById('apple-store').textContent = `Ingredients: ${applesCaught}`;
        
        
        timerInterval = setInterval(() => {
          if (gameActive && timer < gameDuration) {
            timer++;
          }
        }, 1000);
        
        

        music.play();

      }

      

      const musicButton = document.getElementById('music-button');
musicButton.addEventListener('click', function(e) {
  e.stopPropagation();
  if (music.paused) {
    music.play();
  } else {
    music.pause();
  }
});


      
      if (gameStarted) {
        if (e.key === 'ArrowLeft') keys.left = true;
        if (e.key === 'ArrowRight') keys.right = true;
      }
    });

    
    document.addEventListener('keyup', (e) => {
      if (gameStarted) {
        if (e.key === 'ArrowLeft') keys.left = false;
        if (e.key === 'ArrowRight') keys.right = false;
      }
    });

    const fruits = [];


const ingredients = [
  { img: 'images/egg.png', width: 100, height: 90 },
  { img: 'images/strawberry.png', width: 90, height: 80 },
  { img: 'images/flour.png', width: 110, height: 90 }
];


function spawnIngredient() {
  if (gameActive) {
    const ingredient = ingredients[Math.floor(Math.random() * ingredients.length)];
    const xPosition = Math.random() * (canvas.width - ingredient.width);
    const speed = Math.random() * 3 + 2;  

    fallingIngredients.push({
      x: xPosition,
      y: -ingredient.height,  
      img: new Image(),
      speed: speed,
      width: ingredient.width,
      height: ingredient.height
    });

    fallingIngredients[fallingIngredients.length - 1].img.src = ingredient.img;
  }
}

const fallingIngredients = [];


function updateFallingIngredients() {
  for (let i = fallingIngredients.length - 1; i >= 0; i--) {
    const ingredient = fallingIngredients[i];
    ingredient.y += ingredient.speed;  

    
    ctx.drawImage(ingredient.img, ingredient.x, ingredient.y, ingredient.width, ingredient.height);

    
    if (ingredient.y > canvas.height) {
      fallingIngredients.splice(i, 1);
    }
  }
}


function update() {
  if (!gameActive) return;

  const now = Date.now();

  if (keys.left) {
    player.x -= player.speed;
    player.currentImage = 'left';
  } else if (keys.right) {
    player.x += player.speed;
    player.currentImage = 'right';
  }

  player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));

  
  for (let i = fallingIngredients.length - 1; i >= 0; i--) {
    const ingredient = fallingIngredients[i];
    if (
      ingredient.x > player.x &&
      ingredient.x < player.x + player.width &&
      ingredient.y + ingredient.height > player.y &&
      ingredient.y < player.y + player.height
    ) {
      fallingIngredients.splice(i, 1);  
      applesCaught++;  
      pickupSound.currentTime = 0;
    pickupSound.play();
      document.getElementById('apple-store').textContent = `Ingredients: ${applesCaught}`;
      

    }
    
  }

  document.getElementById('timer-fill').style.width = `${(timer / gameDuration) * 100}%`;

  if (timer >= gameDuration) {
  gameActive = false;
  clearInterval(timerInterval);
  alert(`Time's up! 🍎 You caught ${applesCaught} ingredients!`);

  saveScore();           // ← make sure this runs
  showLeaderboard();     // ← then read + display
  music.pause();
  yay.play();
  }
} 


function saveScore() {
  const name = localStorage.getItem("playerName") || playerName;  // Get player name
  const score = applesCaught;

  const leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];

  // Check if player already exists
  const existingPlayer = leaderboard.find(player => player.name === name);

  if (existingPlayer) {
    // Only update score if it's higher
    if (score > existingPlayer.score) {
      existingPlayer.score = score;
    }
  } else {
    // Add new player
    leaderboard.push({ name, score });
  }

  // Save back to localStorage
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
}






function showLeaderboard() {
  const leaderboardEl = document.getElementById("leaderboard");
  const scoreList    = document.getElementById("score-list");

  // Retrieve the leaderboard from localStorage
  const players = JSON.parse(localStorage.getItem("leaderboard")) || [];

  // Filter out players with undefined or empty names
  const validPlayers = players.filter(player => player.name && player.name.trim() !== '');

  // Sort players by score in descending order
  validPlayers.sort((a, b) => b.score - a.score);

  scoreList.innerHTML = ""; 

  // Display each valid player in the leaderboard
  validPlayers.forEach(({ name, score }, idx) => {
    const li = document.createElement("li");
    if (idx === 0) {
      li.innerHTML = `${idx + 1}. <strong>${name}</strong>: ${score} pts <span class="star">⭐</span>`;
    } else {
      li.textContent = `${idx + 1}. ${name}: ${score} pts`;
    }
    scoreList.appendChild(li);
  });

  leaderboardEl.style.display = "block";
}







function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height); 

  if (player.currentImage === 'right') {
    ctx.drawImage(player.imageRight, player.x, player.y, player.width, player.height);
  } else {
    ctx.drawImage(player.imageLeft, player.x, player.y, player.width, player.height);
  }

  updateFallingIngredients();  
  fruits.forEach(fruit => {
    ctx.beginPath();
    ctx.globalAlpha = fruit.opacity;
    ctx.fillStyle = '#fcd34d';
    ctx.arc(fruit.x, fruit.y, fruit.radius, 0, Math.PI * 2);
    ctx.fill();
  });

  ctx.globalAlpha = 1;
  const timerFill = document.getElementById('timer-fill');
  const progress = (timer / gameDuration) * 100;
  timerFill.style.width = `${progress}%`;

}


function startGame() {
  update();
  draw();
}

setInterval(() => {
  spawnIngredient();  
}, 1000);

setInterval(startGame, 16); 






</script>
  
  
</body>
</html>

